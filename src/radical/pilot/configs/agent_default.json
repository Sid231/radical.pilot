# this is the default agent config which is used if no other config is
# specified for an agent.  It contains the minimal set of settings required for
# a functional pilot agent, and does not reserve any nodes for the agent
# components.
{
    # directory for staging files inside the agent sandbox
    "staging_area"         : "staging_area",

    # url schema to indicate the use of staging_area
    "staging_schema"       : "staging",

    # max number of cu out/err chars to push to db
    "max_io_loglength"     : 1024,

    # max time period to collect db notifications into bulks (seconds)
    "bulk_collection_time" : 1.0,

    # time to sleep between database polls (seconds)
    "db_poll_sleeptime"    : 0.1,

    # time between checks of internal state and commands from mothership (seconds)
    "heartbeat_interval"   : 10,

    "agent_layout" : {
        "agent_0"   : {
            "target"     : "local",
            "sub_agents" : [],
            "pull_units" : true,
            "components" : {
                # how many instances of the respective components should be started
                "UpdateWorker"                : 1,
                "AgentStagingInputComponent"  : 1,
                "AgentSchedulingComponent"    : 1,
                "AgentExecutingComponent"     : 1,
                "AgentStagingOutputComponent" : 1
            }
        }
    },

    # Bridges go to the config's top level, they are started by the session.
    #
    # Queue bridges can be configured to stall for a certain batch of messages,
    # releasing them then as bulks of a certain size.  Default for both
    # stall_hwm and batch_size is one.  There will be an assert for ((stall_hwm
    # % batch_size) == 0).
    #
    # Pubsub bridges cannot stall.
    #
    "bridges" : {
        "agent_staging_input_queue"  : { "log_level" : "off",
                                         "stall_hwm" : 1,
                                         "bulk_size" : 1},
        "agent_scheduling_queue"     : { "log_level" : "debug",
                                         "stall_hwm" : 1,
                                         "bulk_size" : 1},
        "agent_executing_queue"      : { "log_level" : "debug",
                                         "stall_hwm" : 10,
                                         "bulk_size" : 5},
        "agent_staging_output_queue" : { "log_level" : "off",
                                         "stall_hwm" : 1,
                                         "bulk_size" : 1},

        "agent_unschedule_pubsub"    : {"log_level" : "off"},
        "agent_reschedule_pubsub"    : {"log_level" : "off"},

        "control_pubsub"             : {"log_level" : "off"},
        "state_pubsub"               : {"log_level" : "off"}
    }
}

